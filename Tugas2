import java.util.Scanner;
import java.util.ArrayList;
import java.util.List;


class Menu {
    private String name;
    private int price;
    private String category;
    
    public Menu(String name, int price, String category) {
        this.name = name;
        this.price = price;
        this.category = category;
    }
    
    public String getName() {
        return name;
    }
    
    public int getPrice() {
        return price;
    }
    
    public void setPrice(int price) {
        this.price = price;
    }
    
    public String getCategory() {
        return category;
    }
    
    public void setCategory(String category) {
        this.category = category;
    }
    
}


public class Main {
    private static List<Menu> menuList = new ArrayList<>();
    
    public static void main(String[] args) throws Exception {
        // Inisialisasi menu awal
        menuList.add(new Menu("Nasi Goreng", 15000, "Makanan"));
        menuList.add(new Menu("Mie Goreng", 10000, "Makanan"));
        menuList.add(new Menu("Gulai Ayam", 12000, "Makanan"));
        menuList.add(new Menu("Ayam Bakar", 12000, "Makanan"));
        menuList.add(new Menu("Es Kelapa", 7000, "Minuman"));
        menuList.add(new Menu("Jus Jeruk", 6000, "Minuman"));
        menuList.add(new Menu("Es Teh", 3000, "Minuman"));
        menuList.add(new Menu("Kopi", 5000, "Minuman"));
        
        boolean running = true;
        try (Scanner input = new Scanner(System.in)) {
            while (running) {
                tampilkanMenuUtama();
                int pilihan = input.nextInt();
                
                switch (pilihan) {
                    case 1:
                        menuPelanggan(input);
                        break;
                    case 2:
                        menuPemilik(input);
                        break;
                    case 3:
                        running = false;
                        System.out.println("Terima kasih!");
                        break;
                    default:
                        System.out.println("Pilihan tidak valid. Silakan coba lagi.");
                        break;
                }
            }
        }
    }
    
    private static void tampilkanMenuUtama() {
        System.out.println("\n=== SELAMAT DATANG DI RESTORAN ===");
        System.out.println("1. Menu Pelanggan");
        System.out.println("2. Menu Pemilik Restoran");
        System.out.println("3. Keluar");
        System.out.print("Pilih menu: ");
    }
    
    private static void menuPelanggan(Scanner input) {
        boolean kembali = false;
        while (!kembali) {
            System.out.println("\n=== MENU PELANGGAN ===");
            tampilkanDaftarMenu();
           System.out.println("\n.");
            System.out.println("00. Kembali ke Menu Utama");
            System.out.print("Pilih menu: ");
            
            int pilihan = input.nextInt();
            
            switch (pilihan) {
                case 1:
                    prosesPemesanan(input);
                    break;
                case 2:
                    kembali = true;
                    break;
                default:
                    System.out.println("Pilihan tidak valid. Silakan coba lagi.");
                    break;
            }
        }
    }
    
    private static void menuPemilik(Scanner input) {
        boolean kembali = false;
        while (!kembali) {
            System.out.println("\n=== MENU PEMILIK RESTORAN ===");
            System.out.println("1. Tambah Menu Baru");
            System.out.println("2. Ubah Harga Menu");
            System.out.println("3. Hapus Menu");
            System.out.println("4. Kembali ke Menu Utama");
            System.out.print("Pilih menu: ");
            
            int pilihan = input.nextInt();
            input.nextLine(); // Membersihkan buffer
            
            switch (pilihan) {
                case 1:
                    tambahMenu(input);
                    break;
                case 2:
                    ubahHargaMenu(input);
                    break;
                case 3:
                    hapusMenu(input);
                    break;
                case 4:
                    kembali = true;
                    break;
                default:
                    System.out.println("Pilihan tidak valid. Silakan coba lagi.");
                    break;
            }
        }
    }
    
    private static void tampilkanDaftarMenu() {
        System.out.println("\nDAFTAR MENU");
        System.out.println();
        
        System.out.println("Makanan:");
        int nomor = 1;
        for (int i = 0; i < menuList.size(); i++) {
            if (menuList.get(i).getCategory().equals("Makanan")) {
                System.out.println(nomor + ". " + menuList.get(i).getName() + " - Rp " + menuList.get(i).getPrice());
                nomor++;
            }
        }
        
        System.out.println();
        System.out.println("Minuman:");
        for (int i = 0; i < menuList.size(); i++) {
            if (menuList.get(i).getCategory().equals("Minuman")) {
                System.out.println(nomor + ". " + menuList.get(i).getName() + " - Rp " + menuList.get(i).getPrice());
                nomor++;
            }
        }
    }
    
    private static void tampilkanDaftarMenuDenganNomor() {
        System.out.println("\nDAFTAR MENU:");
        for (int i = 0; i < menuList.size(); i++) {
            System.out.println((i + 1) + ". " + menuList.get(i).getName() + 
                             " - Rp " + menuList.get(i).getPrice() + 
                             " (" + menuList.get(i).getCategory() + ")");
        }
    }
    
    private static void prosesPemesanan(Scanner input) {
        System.out.println("\n=== PEMESANAN ===");
        tampilkanDaftarMenuDenganNomor();
        
        // Array untuk menyimpan pesanan
        int[] menuPesanan = new int[4];
        int[] jumlahPesanan = new int[4];
        
        // Input pesanan menggunakan loop
        for (int i = 0; i < 4; i++) {
            if (i == 0) {
                System.out.print("Masukan pesanan menu pertama (0 untuk batal): ");
            } else {
                System.out.print("Masukan pesanan menu ke-" + (i + 1) + " (0 jika tidak ada pesanan): ");
            }
            
            menuPesanan[i] = input.nextInt();
            
            if (menuPesanan[i] == 0) {
                jumlahPesanan[i] = 0;
                break;
            } else if (menuPesanan[i] >= 1 && menuPesanan[i] <= menuList.size()) {
                System.out.print("Jumlah pesanan: ");
                jumlahPesanan[i] = input.nextInt();
            } else {
                System.out.println("Nomor menu tidak valid!");
                i--; // Ulangi input
                continue;
            }
        }
        
        // Menghitung total menggunakan loop
        double total = 0;
        for (int i = 0; i < menuPesanan.length; i++) {
            if (menuPesanan[i] >= 1 && menuPesanan[i] <= menuList.size()) {
                total += menuList.get(menuPesanan[i] - 1).getPrice() * jumlahPesanan[i];
            }
        }
        
        if (total == 0) {
            System.out.println("Tidak ada pesanan yang diproses.");
            return;
        }
        
        // Menghitung diskon dan promo
        double diskon = 0;
        boolean gratisMinuman = false;
        
        if (total > 100000) {
            diskon = 0.10 * total;
        } else if (total > 50000) {
            gratisMinuman = true;
        }
        
        // Menghitung pajak dan biaya tambahan
        double pajak = 0.10 * total;
        double pelayanan = 20000; 
        double totalSetelahDiskon = total - diskon;
        double totalAkhir = totalSetelahDiskon + pajak + pelayanan;
        
        // Menampilkan struk pesanan
        System.out.println("\n=== STRUK PEMESANAN ===");
        System.out.println();
        
        // Menampilkan detail pesanan menggunakan loop
        for (int i = 0; i < menuPesanan.length; i++) {
            if (menuPesanan[i] >= 1 && menuPesanan[i] <= menuList.size()) {
                int indexMenu = menuPesanan[i] - 1;
                int jumlah = jumlahPesanan[i];
                int subtotal = menuList.get(indexMenu).getPrice() * jumlah;
                System.out.println(menuList.get(indexMenu).getName() + "  *   " + jumlah + "  = Rp " + subtotal);
            }
        }
        
        System.out.println("==========================");
        System.out.println("TOTAL PESANAN = Rp " + total);
        
        if (diskon > 0) {
            System.out.println("Discount 10% = Rp " + diskon);
        } else if (gratisMinuman) {
            System.out.println("PROMO B1G1 UNTUK KATEGORI MINUMAN (Syarat dan Ketentuan Berlaku)");
        }
        
        System.out.println();
        System.out.println("Pajak 10%:  Rp " + pajak);
        System.out.println("Pelayanan:  Rp " + pelayanan); 
        System.out.println("==========================");
        System.out.println("Total Rp " + totalAkhir);
        System.out.println();
        
        System.out.println("TERIMA KASIH");
        System.out.println("==========================");
    }
    
    private static void tambahMenu(Scanner input) {
        System.out.println("\n=== TAMBAH MENU BARU ===");
        System.out.print("Masukkan nama menu: ");
        String nama = input.nextLine();
        
        System.out.print("Masukkan harga menu: ");
        int harga = input.nextInt();
        
        System.out.print("Masukkan kategori (Makanan/Minuman): ");
        input.nextLine(); // Membersihkan buffer
        String kategori = input.nextLine();
        
        menuList.add(new Menu(nama, harga, kategori));
        System.out.println("Menu baru berhasil ditambahkan!");
    }
    
    private static void ubahHargaMenu(Scanner input) {
        System.out.println("\n=== UBAH HARGA MENU ===");
        tampilkanDaftarMenuDenganNomor();
        
        System.out.print("Masukkan nomor menu yang ingin diubah harganya: ");
        int nomor = input.nextInt();
        
        if (nomor >= 1 && nomor <= menuList.size()) {
            Menu menu = menuList.get(nomor - 1);
            System.out.println("Menu yang dipilih: " + menu.getName() + " - Rp " + menu.getPrice());
            System.out.print("Masukkan harga baru: ");
            int hargaBaru = input.nextInt();
            
            System.out.print("Apakah Anda yakin ingin mengubah harga? (Ya/Tidak): ");
            input.nextLine(); // Membersihkan buffer
            String konfirmasi = input.nextLine();
            
            if (konfirmasi.equalsIgnoreCase("Ya")) {
                menu.setPrice(hargaBaru);
                System.out.println("Harga menu berhasil diubah!");
            } else {
                System.out.println("Perubahan dibatalkan.");
            }
        } else {
            System.out.println("Nomor menu tidak valid!");
        }
    }
    
    private static void hapusMenu(Scanner input) {
        System.out.println("\n=== HAPUS MENU ===");
        tampilkanDaftarMenuDenganNomor();
        
        System.out.print("Masukkan nomor menu yang ingin dihapus: ");
        int nomor = input.nextInt();
        
        if (nomor >= 1 && nomor <= menuList.size()) {
            Menu menu = menuList.get(nomor - 1);
            System.out.println("Menu yang akan dihapus: " + menu.getName() + " - Rp " + menu.getPrice());
            
            System.out.print("Apakah Anda yakin ingin menghapus menu ini? (Ya/Tidak): ");
            input.nextLine(); // Membersihkan buffer
            String konfirmasi = input.nextLine();
            
            if (konfirmasi.equalsIgnoreCase("Ya")) {
                menuList.remove(nomor - 1);
                System.out.println("Menu berhasil dihapus!");
            } else {
                System.out.println("Penghapusan dibatalkan.");
            }
        } else {
            System.out.println("Nomor menu tidak valid!");
        }
    }
}

